{
  "schemaVersion": 2,
  "$schema": "https://schemas.runtipi.io/dynamic-compose.json",
  "services": [
    {
      "name": "lampac",
      "image": "immisterio/lampac:latest",
      "isMain": true,
      "internalPort": 9118,
      "restart": "unless-stopped",
      "environment": {
        "DOTNET_ENVIRONMENT": "Production",
        "ASPNETCORE_URLS": "http://+:9118"
      },
      "volumes": [
        {
          "source": "${APP_DATA_DIR}/config",
          "target": "/home/lampac",
          "type": "bind"
        },
        {
          "source": "${APP_DATA_DIR}/dlna",
          "target": "/home/lampac/dlna",
          "type": "bind"
        }
      ],
      "labels": {
        "traefik.enable": "true",
        "traefik.http.routers.lampac.rule": "Host(`${APP_SUBDOMAIN}.${TIPI_DOMAIN}`)",
        "traefik.http.routers.lampac.entrypoints": "websecure",
        "traefik.http.routers.lampac.tls.certresolver": "letsencrypt"
      }
    }
  ],
  "initScript": "echo '${LAMPAC_CONFIG}' > ${APP_DATA_DIR}/config/init.conf || true"
}
